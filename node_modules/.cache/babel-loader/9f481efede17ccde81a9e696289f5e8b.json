{"ast":null,"code":"var _jsxFileName = \"/Users/dzennetahydyrova/board-project2/board-project/src/containers/boards/Boards.js\";\nimport React, { useState, useEffect } from \"react\";\nimport db from \"../../firebaseConfig\";\nimport Board from \"../../components/board/Board\";\nimport BoardsForm from \"../../components/boardForm/BoardForm\";\n\nconst BoardsContainer = () => {\n  const [boards, setBoards] = useState([]); // const [fetchBoardData, setFetchData] = useState(0);\n  //it console.logs now random string. it means that we don't assign newly generated id to board id\n  //I added something random to see how it behaves, because doc() doesn't accept empty string as an arg\n  // const docId = db.collection(\"boards\").doc().id;\n  // db.collection(\"boards\")\n  //   .orderBy(\"title\")\n  //   .onSnapshot((snapshot) => {\n  //     let changes = snapshot.docChanges();\n  //     setBoards(\n  //       changes.map((change) => {\n  //         return change.doc.data();\n  //       })\n  //     );\n  //   });\n\n  useEffect(() => {\n    // const boardsResponse = await db.collection(\"boards\").get();\n    // const boardsData = boardsResponse.docs.map((board) => board.data());\n    // setBoards(boardsData);\n    // console.log(boardsResponse);\n    console.log(boards);\n    return db.collection(\"boards\").onSnapshot(snapshot => {\n      // const boardData = [];\n      snapshot.docChanges().forEach( // (doc) => boardData.push({ ...doc.data(), id: doc.id })\n      change => {\n        if (change.type === \"added\") {\n          setBoards(prevBoards => [...prevBoards, { ...change.doc.data(),\n            id: change.doc.id\n          }]); // boardData.push();\n          // console.log(change.doc.data());\n        }\n\n        if (change.type === \"modified\") {\n          console.log(change.doc.data(), change.doc.id);\n          setBoards(prevBoards => {\n            const newArrBoards = [...prevBoards];\n            let index = newArrBoards.findIndex(el => el.id === change.doc.id);\n            console.log(index);\n\n            if (index !== -1) {\n              newArrBoards[index] = { ...change.doc.data(),\n                id: change.doc.id\n              };\n            }\n\n            return newArrBoards;\n          });\n        }\n\n        if (change.type === \"removed\") {\n          setBoards(prevBoards => {\n            const newArrBoards = [...prevBoards];\n            let index = newArrBoards.findIndex(el => el.id === change.doc.id);\n\n            if (index !== -1) {\n              newArrBoards.slice(change.doc.id); // newArrBoards[index] = {\n              //   ...change.doc.data(),\n              //   id: change.doc.id,\n              // };\n\n              console.log(newArrBoards);\n            }\n\n            return newArrBoards;\n          });\n        }\n      }); // setBoards([...boards, boardData]);\n    });\n  }, []);\n  console.log(boards);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BoardsForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, boards.map(el => {\n    return /*#__PURE__*/React.createElement(Board, {\n      key: el.id,\n      boardTitle: el.title,\n      boardsItems: el.items,\n      boardsId: el.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    });\n  }))); //   db.collection(\"cities\").doc(\"SF\")\n  //     .onSnapshot(function(doc) {\n  //         console.log(\"Current data: \", doc.data());\n  //     });\n};\n\nexport default BoardsContainer;\n/* <h3>{el.title}</h3> */\n//           {/* <Board oneBoard={el} /> */}\n//           {/* {el.items.map((item) => {\n//             return <p>{item}</p>;\n//           })} */}\n// <div key={index + el}>{el}</div>\n// db.collection('collection')\n// .onSnapshot((snapshot) => {\n//     snapshot.docChanges().forEach((change) => {\n//         const payload = {\n//             id: change.doc.id,\n//             data: change.doc.data(),\n//         };\n//         ...... some action\n//     });\n// });\n// useEffect(() => {\n//   async function fetchBoardsData() {\n//     // const boardsResponse = await db.collection(\"boards\").get();\n//     // const boardsData = boardsResponse.docs.map((board) => board.data());\n//     // setBoards(boardsData);\n//     // console.log(boardsResponse);\n//     db.collection(\"boards\")\n//       .orderBy(\"name\")\n//       .onSnapshot(function (doc) {\n//         console.log(\"Current data: \", doc.data());\n//       });\n//   }\n//   fetchBoardsData();\n// }, [fetchBoardData]);\n//add if i am missing smth\n//I will edit the same way i watched on youtube\n//oki doki\n// console.log(\"boards\", boards);\n//   <Card border=\"info\" style={{ width: '18rem' }}>\n//   <Card.Header>Header</Card.Header>\n//   <Card.Body>\n//     <Card.Title>Info Card Title</Card.Title>\n//     <Card.Text>\n//       Some quick example text to build on the card title and make up the bulk\n//       of the card's content.\n//     </Card.Text>\n//   </Card.Body>\n// </Card>\n// console.log(\"boards\", boards.id)","map":{"version":3,"sources":["/Users/dzennetahydyrova/board-project2/board-project/src/containers/boards/Boards.js"],"names":["React","useState","useEffect","db","Board","BoardsForm","BoardsContainer","boards","setBoards","console","log","collection","onSnapshot","snapshot","docChanges","forEach","change","type","prevBoards","doc","data","id","newArrBoards","index","findIndex","el","slice","map","title","items"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport db from \"../../firebaseConfig\";\nimport Board from \"../../components/board/Board\";\nimport BoardsForm from \"../../components/boardForm/BoardForm\";\n\nconst BoardsContainer = () => {\n  const [boards, setBoards] = useState([]);\n  // const [fetchBoardData, setFetchData] = useState(0);\n\n  //it console.logs now random string. it means that we don't assign newly generated id to board id\n  //I added something random to see how it behaves, because doc() doesn't accept empty string as an arg\n\n  // const docId = db.collection(\"boards\").doc().id;\n\n  // db.collection(\"boards\")\n  //   .orderBy(\"title\")\n  //   .onSnapshot((snapshot) => {\n  //     let changes = snapshot.docChanges();\n  //     setBoards(\n  //       changes.map((change) => {\n  //         return change.doc.data();\n  //       })\n  //     );\n  //   });\n\n  useEffect(() => {\n    // const boardsResponse = await db.collection(\"boards\").get();\n    // const boardsData = boardsResponse.docs.map((board) => board.data());\n    // setBoards(boardsData);\n    // console.log(boardsResponse);\n    console.log(boards);\n    return db.collection(\"boards\").onSnapshot((snapshot) => {\n      // const boardData = [];\n      snapshot.docChanges().forEach(\n        // (doc) => boardData.push({ ...doc.data(), id: doc.id })\n        (change) => {\n          if (change.type === \"added\") {\n            setBoards((prevBoards) => [\n              ...prevBoards,\n              { ...change.doc.data(), id: change.doc.id },\n            ]);\n            // boardData.push();\n            // console.log(change.doc.data());\n          }\n          if (change.type === \"modified\") {\n            console.log(change.doc.data(), change.doc.id);\n            setBoards((prevBoards) => {\n              const newArrBoards = [...prevBoards];\n              let index = newArrBoards.findIndex(\n                (el) => el.id === change.doc.id\n              );\n              console.log(index);\n              if (index !== -1) {\n                newArrBoards[index] = {\n                  ...change.doc.data(),\n                  id: change.doc.id,\n                };\n              }\n              return newArrBoards;\n            });\n          }\n          if (change.type === \"removed\") {\n            setBoards((prevBoards) => {\n              const newArrBoards = [...prevBoards];\n              let index = newArrBoards.findIndex(\n                (el) => el.id === change.doc.id\n              );\n\n              if (index !== -1) {\n                newArrBoards.slice(change.doc.id);\n                // newArrBoards[index] = {\n                //   ...change.doc.data(),\n                //   id: change.doc.id,\n                // };\n                console.log(newArrBoards);\n              }\n              return newArrBoards;\n            });\n          }\n        }\n      );\n      // setBoards([...boards, boardData]);\n    });\n  }, []);\n\n  console.log(boards);\n  return (\n    <>\n      <div>\n        <BoardsForm />\n      </div>\n      <div>\n        {boards.map((el) => {\n          return (\n            <Board\n              key={el.id}\n              boardTitle={el.title}\n              boardsItems={el.items}\n              boardsId={el.id}\n            />\n          );\n        })}\n      </div>\n    </>\n  );\n\n  //   db.collection(\"cities\").doc(\"SF\")\n  //     .onSnapshot(function(doc) {\n  //         console.log(\"Current data: \", doc.data());\n  //     });\n};\n\nexport default BoardsContainer;\n\n/* <h3>{el.title}</h3> */\n\n//           {/* <Board oneBoard={el} /> */}\n//           {/* {el.items.map((item) => {\n//             return <p>{item}</p>;\n//           })} */}\n\n// <div key={index + el}>{el}</div>\n\n// db.collection('collection')\n// .onSnapshot((snapshot) => {\n//     snapshot.docChanges().forEach((change) => {\n//         const payload = {\n//             id: change.doc.id,\n//             data: change.doc.data(),\n//         };\n\n//         ...... some action\n//     });\n// });\n\n// useEffect(() => {\n//   async function fetchBoardsData() {\n//     // const boardsResponse = await db.collection(\"boards\").get();\n//     // const boardsData = boardsResponse.docs.map((board) => board.data());\n//     // setBoards(boardsData);\n//     // console.log(boardsResponse);\n\n//     db.collection(\"boards\")\n//       .orderBy(\"name\")\n\n//       .onSnapshot(function (doc) {\n//         console.log(\"Current data: \", doc.data());\n//       });\n//   }\n//   fetchBoardsData();\n// }, [fetchBoardData]);\n\n//add if i am missing smth\n//I will edit the same way i watched on youtube\n//oki doki\n\n// console.log(\"boards\", boards);\n\n//   <Card border=\"info\" style={{ width: '18rem' }}>\n//   <Card.Header>Header</Card.Header>\n//   <Card.Body>\n//     <Card.Title>Info Card Title</Card.Title>\n//     <Card.Text>\n//       Some quick example text to build on the card title and make up the bulk\n//       of the card's content.\n//     </Card.Text>\n//   </Card.Body>\n// </Card>\n// console.log(\"boards\", boards.id)\n"]},"metadata":{},"sourceType":"module"}