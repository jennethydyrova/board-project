{"ast":null,"code":"var _jsxFileName = \"/Users/dzennetahydyrova/board-project2/board-project/src/components/item/Item.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"antd/dist/antd.css\";\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport { Collapse } from \"antd\";\nimport db from \"../../firebaseConfig\";\nimport * as firebase from \"firebase/app\";\nimport Modal from \"react-modal\";\nimport { DatePicker, message } from \"antd\";\nimport { Row, Space, Checkbox, Button } from \"antd\";\nimport \"antd/dist/antd.css\";\nimport \"moment/locale/zh-cn\";\nimport moment from \"moment\";\n\nconst Item = ({\n  task,\n  boardsId,\n  boardsItems,\n  setItems\n}) => {\n  const currentDate = new Date();\n  currentDate.setDate(currentDate.getDate() + 1);\n  const defaultDate = currentDate.toISOString().substr(0, 10);\n  const [showResults, setShowResults] = React.useState(true);\n  const [userInput, setUserInput] = useState({\n    title: task.title,\n    due: task.due,\n    assigner: task.assigner,\n    assignee: task.assignee,\n    id: task.id,\n    completed: task.completed\n  }); // const [checked, setChecked] = useState(false)\n\n  const {\n    Panel\n  } = Collapse;\n  const [modalOpened, setModalOpened] = useState({\n    modalOpen: false\n  });\n  const [editedTask, setEditedTask] = useState(task);\n  const style = {\n    items: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      justifyContent: \"space-between\"\n    }\n  };\n  const modalStyle = {\n    content: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      width: \"500px\",\n      height: \"300px\"\n    }\n  };\n  console.log(task);\n\n  const handleClick = e => {\n    db.collection(\"boards\").doc(boardsId).update({\n      items: firebase.firestore.FieldValue.arrayRemove(task)\n    });\n  };\n\n  const handleInputValue = e => {\n    setUserInput({ ...userInput,\n      title: e.target.value,\n      id: task.id\n    });\n  };\n\n  const handleDueChange = value => {\n    message.info(`Selected Date: ${value ? value.format(\"YYYY-MM-DD\") : \"None\"}`);\n    setUserInput({ ...userInput,\n      due: value.toDate().toISOString().substr(0, 10)\n    });\n  };\n\n  const editItem = async () => {\n    const modifiedItems = boardsItems;\n    const itemIndex = modifiedItems.findIndex(item => item.id === task.id);\n    modifiedItems[itemIndex] = userInput;\n    await db.collection(\"boards\").doc(boardsId).update({\n      items: modifiedItems\n    });\n  };\n\n  const handleEdit = e => {\n    e.preventDefault();\n    editItem();\n    setModalOpened({\n      modalOpen: modalOpened.modalOpen === true ? false : true\n    });\n  };\n\n  useEffect(() => {\n    setEditedTask(userInput); // completeHandler()\n  }, [userInput]);\n\n  const handleModal = () => {\n    setModalOpened({\n      modalOpen: modalOpened.modalOpen === true ? false : true\n    });\n  };\n\n  const handleAssignerChange = e => {\n    setUserInput({ ...userInput,\n      assigner: e.target.value\n    });\n  };\n\n  const handleAssigneeChange = e => {\n    setUserInput({ ...userInput,\n      assignee: e.target.value\n    });\n  };\n\n  const completeHandler = e => {\n    e.preventDefault();\n    completeStatus();\n    setShowResults(false);\n  };\n\n  const completeStatus = async () => {\n    const modifiedItems = [...boardsItems];\n    const itemIndex = modifiedItems.findIndex(item => item.id === task.id);\n    modifiedItems[itemIndex].completed = !modifiedItems[itemIndex].completed;\n    await db.collection(\"boards\").doc(boardsId).update({\n      items: modifiedItems\n    });\n  };\n\n  const collapseStyle = {\n    backgroundColor: '282934'\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style.items,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Collapse, {\n    style: {\n      width: \"100%\"\n    },\n    defaultActiveKey: [\"1\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Panel, {\n    header: task.title,\n    key: task.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, \"Assigner: \", task.assigner), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  }, \"Assignee: \", task.assignee), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, \"Due date: \", task.due), /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-info\",\n    type: \"submit\",\n    size: \"sm\",\n    onClick: e => handleModal(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }, \"Edit\"), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modalOpened.modalOpen,\n    style: modalStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Space, {\n    direction: \"vertical\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"items\",\n    value: userInput.title,\n    className: \"task-title\",\n    placeholder: \"Task title\",\n    onChange: e => handleInputValue(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(DatePicker, {\n    onChange: e => handleDueChange(e),\n    defaultValue: moment(defaultDate),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"assigner\",\n    value: userInput.assigner,\n    placeholder: \"Assigner\",\n    onChange: e => handleAssignerChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"assignee\",\n    value: userInput.assignee,\n    placeholder: \"Assignee\",\n    onChange: e => handleAssigneeChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-info\",\n    type: \"submit\",\n    size: \"sm\",\n    onClick: e => handleEdit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 19\n    }\n  }, \"Edit task\"))), /*#__PURE__*/React.createElement(Button, {\n    onClick: e => handleModal(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 15\n    }\n  }, \"Close form\"))))), /*#__PURE__*/React.createElement(Checkbox, {\n    onClick: e => completeHandler(e),\n    checked: task.completed === true ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Item;","map":{"version":3,"sources":["/Users/dzennetahydyrova/board-project2/board-project/src/components/item/Item.js"],"names":["React","useState","useEffect","DeleteOutlined","Collapse","db","firebase","Modal","DatePicker","message","Row","Space","Checkbox","Button","moment","Item","task","boardsId","boardsItems","setItems","currentDate","Date","setDate","getDate","defaultDate","toISOString","substr","showResults","setShowResults","userInput","setUserInput","title","due","assigner","assignee","id","completed","Panel","modalOpened","setModalOpened","modalOpen","editedTask","setEditedTask","style","items","display","flexDirection","justifyContent","modalStyle","content","width","height","console","log","handleClick","e","collection","doc","update","firestore","FieldValue","arrayRemove","handleInputValue","target","value","handleDueChange","info","format","toDate","editItem","modifiedItems","itemIndex","findIndex","item","handleEdit","preventDefault","handleModal","handleAssignerChange","handleAssigneeChange","completeHandler","completeStatus","collapseStyle","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"antd/dist/antd.css\";\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport { Collapse } from \"antd\";\n\nimport db from \"../../firebaseConfig\";\nimport * as firebase from \"firebase/app\";\nimport Modal from \"react-modal\";\nimport { DatePicker, message } from \"antd\";\nimport { Row, Space, Checkbox, Button } from \"antd\";\nimport \"antd/dist/antd.css\";\nimport \"moment/locale/zh-cn\";\nimport moment from \"moment\";\n\n\nconst Item = ({ task, boardsId, boardsItems, setItems }) => {\n  const currentDate = new Date();\n  currentDate.setDate(currentDate.getDate() + 1);\n  const defaultDate = currentDate.toISOString().substr(0, 10);\n\n  const [showResults, setShowResults] = React.useState(true)\n\n  const [userInput, setUserInput] = useState({\n    title: task.title,\n    due: task.due,\n    assigner: task.assigner,\n    assignee: task.assignee,\n    id: task.id,\n    completed: task.completed\n  });\n\n  // const [checked, setChecked] = useState(false)\n\n  const { Panel } = Collapse;\n  const [modalOpened, setModalOpened] = useState({ modalOpen: false });\n\n  const [editedTask, setEditedTask] = useState(task);\n\n  const style = {\n    items: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      justifyContent: \"space-between\",\n    },\n  };\n  const modalStyle = {\n    content: {\n      display: \"flex\",\n      justifyContent: \"center\",\n      width: \"500px\",\n      height: \"300px\",\n    },\n  };\n  \n  console.log(task)\n\n  const handleClick = (e) => {\n    db.collection(\"boards\")\n      .doc(boardsId)\n      .update({\n        items: firebase.firestore.FieldValue.arrayRemove(task),\n      });\n  };\n\n\n  const handleInputValue = (e) => {\n    setUserInput({ ...userInput, title: e.target.value, id: task.id });\n  };\n\n  const handleDueChange = (value) => {\n    message.info(\n      `Selected Date: ${value ? value.format(\"YYYY-MM-DD\") : \"None\"}`\n    );\n    setUserInput({\n      ...userInput,\n      due: value.toDate().toISOString().substr(0, 10),\n    });\n  };\n\n  const editItem = async () => {\n    const modifiedItems = boardsItems;\n    const itemIndex = modifiedItems.findIndex((item) => item.id === task.id);\n    modifiedItems[itemIndex] = userInput;\n    await db.collection(\"boards\").doc(boardsId).update({\n      items: modifiedItems,\n    });\n   \n  };\n\n  const handleEdit = (e) => {\n    e.preventDefault();\n    editItem();\n    setModalOpened({\n      modalOpen: modalOpened.modalOpen === true ? false : true,\n    });\n   \n  };\n  useEffect(() => {\n    setEditedTask(userInput);\n\n    // completeHandler()\n  }, [userInput]);\n\n  const handleModal = () => {\n    setModalOpened({\n      modalOpen: modalOpened.modalOpen === true ? false : true,\n    });\n  };\n\n  const handleAssignerChange = (e) => {\n    setUserInput({ ...userInput, assigner: e.target.value });\n  };\n\n  const handleAssigneeChange = (e) => {\n    setUserInput({ ...userInput, assignee: e.target.value });\n  };\n\nconst completeHandler = (e) => {\ne.preventDefault()\ncompleteStatus()\nsetShowResults(false)\n}\n\nconst completeStatus = async() => {\n  const modifiedItems = [...boardsItems];\n  const itemIndex = modifiedItems.findIndex((item) => item.id === task.id);\n  modifiedItems[itemIndex].completed = !modifiedItems[itemIndex].completed;\n  await db.collection(\"boards\").doc(boardsId).update({\n    items: modifiedItems,\n  });\n\n}\n\nconst collapseStyle={\n  backgroundColor: '282934'\n}\n\n  return (\n    <div style={style.items} >\n      <Collapse style={{ width: \"100%\" }} defaultActiveKey={[\"1\"]} >\n        <Panel header={task.title} key={task.id} > \n          <p>Assigner: {task.assigner}</p>\n          <p>Assignee: {task.assignee}</p>\n          <p>Due date: {task.due}</p>\n          <Button\n            variant=\"outline-info\"\n            type=\"submit\"\n            size=\"sm\"\n            onClick={(e) => handleModal(e)}\n          >\n            Edit\n          </Button>\n          <Modal isOpen={modalOpened.modalOpen} style={modalStyle}>\n            <Space direction=\"vertical\" align=\"center\">\n              <form>\n                <Row>\n                  <input\n                    name=\"items\"\n                    value={userInput.title}\n                    className=\"task-title\"\n                    placeholder=\"Task title\"\n                    onChange={(e) => handleInputValue(e)}\n                  />\n                {/* </Row>\n\n                <Row> */}\n                  <DatePicker\n                    onChange={(e) => handleDueChange(e)}\n                    defaultValue={moment(defaultDate)}\n                  />\n                {/* </Row>\n\n                <Row> */}\n                  <input\n                    name=\"assigner\"\n                    value={userInput.assigner}\n                    placeholder=\"Assigner\"\n                    onChange={(e) => handleAssignerChange(e)}\n                  />\n                </Row>\n\n                <Row>\n                  <input\n                    name=\"assignee\"\n                    value={userInput.assignee}\n                    placeholder=\"Assignee\"\n                    onChange={(e) => handleAssigneeChange(e)}\n                  />\n                </Row>\n\n                <Row>\n                  <Button\n                    variant=\"outline-info\"\n                    type=\"submit\"\n                    size=\"sm\"\n                    onClick={(e) => handleEdit(e)}\n                  >\n                    Edit task\n                  </Button>\n                </Row>\n              </form>\n              <Button onClick={(e) => handleModal(e)}>Close form</Button>\n            </Space>\n          </Modal>\n        </Panel>\n      </Collapse>\n      {/* <DeleteOutlined\n        style={{ cursor: \"pointer\" ,  marginTop: '10px'}}\n        onClick={(e) => handleClick(e)}\n      /> */}\n      <Checkbox onClick={e => completeHandler(e)} checked={task.completed === true ? true : false}></Checkbox>\n    </div>\n  );\n};\n\nexport default Item;\n\n"]},"metadata":{},"sourceType":"module"}