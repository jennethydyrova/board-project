{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dzennetahydyrova/board-project2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/dzennetahydyrova/board-project2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/dzennetahydyrova/board-project2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/dzennetahydyrova/board-project2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"antd/dist/antd.css\";import{DeleteOutlined}from\"@ant-design/icons\";import{Collapse}from\"antd\";import db from\"../../firebaseConfig\";import{Checkbox,Button,Col}from\"antd\";import\"antd/dist/antd.css\";import\"moment/locale/zh-cn\";import EditForm from\"../EditForm/EditForm\";var Item=function Item(_ref){var task=_ref.task,boardsId=_ref.boardsId,boardsItems=_ref.boardsItems;var currentDate=new Date();currentDate.setDate(currentDate.getDate()+1);var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),showResults=_React$useState2[0],setShowResults=_React$useState2[1];var _useState=useState({title:task.title,due:task.due,assigner:task.assigner,assignee:task.assignee,id:task.id,completed:task.completed}),_useState2=_slicedToArray(_useState,2),userInput=_useState2[0],setUserInput=_useState2[1];var Panel=Collapse.Panel;var _useState3=useState({modalOpen:false}),_useState4=_slicedToArray(_useState3,2),modalOpened=_useState4[0],setModalOpened=_useState4[1];var _useState5=useState(task),_useState6=_slicedToArray(_useState5,2),editedTask=_useState6[0],setEditedTask=_useState6[1];var style={items:{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"}};var handleClick=function handleClick(e){db.firestore().collection(\"boards\").doc(boardsId).update({items:db.firestore.FieldValue.arrayRemove(task)});};useEffect(function(){setEditedTask(userInput);setUserInput(\"\");},[userInput]);var handleModal=function handleModal(){setModalOpened({modalOpen:modalOpened.modalOpen===true?false:true});};var completeHandler=function completeHandler(e){e.preventDefault();completeStatus();setShowResults(false);};var completeStatus=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var modifiedItems,itemIndex;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:modifiedItems=_toConsumableArray(boardsItems);itemIndex=modifiedItems.findIndex(function(item){return item.id===task.id;});modifiedItems[itemIndex].completed=!modifiedItems[itemIndex].completed;_context.next=5;return db.firestore().collection(\"boards\").doc(boardsId).update({items:modifiedItems});case 5:case\"end\":return _context.stop();}}},_callee);}));return function completeStatus(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{style:style.items},/*#__PURE__*/React.createElement(Collapse,{className:\"item-title\",defaultActiveKey:[\"1\"]},/*#__PURE__*/React.createElement(Panel,{header:task.title,key:task.id},/*#__PURE__*/React.createElement(\"p\",{className:\"item-element\"},\"Assigner: \",task.assigner),/*#__PURE__*/React.createElement(\"p\",{className:\"item-element\"},\"Assignee: \",task.assignee),/*#__PURE__*/React.createElement(\"p\",{className:\"item-element\"},\"Due date: \",task.due),/*#__PURE__*/React.createElement(Button,{variant:\"outline-info\",type:\"submit\",size:\"sm\",onClick:function onClick(e){return handleModal(e);},className:\"form-btn\"},\"Edit\"),/*#__PURE__*/React.createElement(EditForm,{showResults:showResults,task:task,boardsId:boardsId,boardsItems:boardsItems,modalOpened:modalOpened,editedTask:editedTask,setModalOpened:setModalOpened}))),/*#__PURE__*/React.createElement(Col,{style:{marginLeft:\"1rem\"}},/*#__PURE__*/React.createElement(DeleteOutlined,{style:{cursor:\"pointer\"},onClick:function onClick(e){return handleClick(e);}}),/*#__PURE__*/React.createElement(Checkbox,{onClick:function onClick(e){return completeHandler(e);},checked:task.completed===true?true:false})));};export default Item;","map":{"version":3,"sources":["/Users/dzennetahydyrova/board-project2/src/components/item/Item.js"],"names":["React","useState","useEffect","DeleteOutlined","Collapse","db","Checkbox","Button","Col","EditForm","Item","task","boardsId","boardsItems","currentDate","Date","setDate","getDate","showResults","setShowResults","title","due","assigner","assignee","id","completed","userInput","setUserInput","Panel","modalOpen","modalOpened","setModalOpened","editedTask","setEditedTask","style","items","display","flexDirection","justifyContent","handleClick","e","firestore","collection","doc","update","FieldValue","arrayRemove","handleModal","completeHandler","preventDefault","completeStatus","modifiedItems","itemIndex","findIndex","item","marginLeft","cursor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"antd/dist/antd.css\";\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport { Collapse } from \"antd\";\nimport db from \"../../firebaseConfig\";\nimport { Checkbox, Button, Col } from \"antd\";\nimport \"antd/dist/antd.css\";\nimport \"moment/locale/zh-cn\";\nimport EditForm from \"../EditForm/EditForm\";\n\nconst Item = ({ task, boardsId, boardsItems }) => {\n  const currentDate = new Date();\n  currentDate.setDate(currentDate.getDate() + 1);\n\n  const [showResults, setShowResults] = React.useState(true);\n  const [userInput, setUserInput] = useState({\n    title: task.title,\n    due: task.due,\n    assigner: task.assigner,\n    assignee: task.assignee,\n    id: task.id,\n    completed: task.completed,\n  });\n\n  const { Panel } = Collapse;\n  const [modalOpened, setModalOpened] = useState({ modalOpen: false });\n  const [editedTask, setEditedTask] = useState(task);\n\n  const style = {\n    items: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      justifyContent: \"space-between\",\n    },\n  };\n\n  const handleClick = (e) => {\n    db.firestore()\n      .collection(\"boards\")\n      .doc(boardsId)\n      .update({\n        items: db.firestore.FieldValue.arrayRemove(task),\n      });\n  };\n\n  useEffect(() => {\n    setEditedTask(userInput);\n    setUserInput(\"\");\n  }, [userInput]);\n\n  const handleModal = () => {\n    setModalOpened({\n      modalOpen: modalOpened.modalOpen === true ? false : true,\n    });\n  };\n\n  const completeHandler = (e) => {\n    e.preventDefault();\n    completeStatus();\n    setShowResults(false);\n  };\n\n  const completeStatus = async () => {\n    const modifiedItems = [...boardsItems];\n    const itemIndex = modifiedItems.findIndex((item) => item.id === task.id);\n    modifiedItems[itemIndex].completed = !modifiedItems[itemIndex].completed;\n    await db.firestore().collection(\"boards\").doc(boardsId).update({\n      items: modifiedItems,\n    });\n  };\n\n  return (\n    <div style={style.items}>\n      <Collapse className=\"item-title\" defaultActiveKey={[\"1\"]}>\n        <Panel header={task.title} key={task.id}>\n          <p className=\"item-element\">Assigner: {task.assigner}</p>\n          <p className=\"item-element\">Assignee: {task.assignee}</p>\n          <p className=\"item-element\">Due date: {task.due}</p>\n          <Button\n            variant=\"outline-info\"\n            type=\"submit\"\n            size=\"sm\"\n            onClick={(e) => handleModal(e)}\n            className=\"form-btn\"\n          >\n            Edit\n          </Button>\n          <EditForm\n            showResults={showResults}\n            task={task}\n            boardsId={boardsId}\n            boardsItems={boardsItems}\n            modalOpened={modalOpened}\n            editedTask={editedTask}\n            setModalOpened={setModalOpened}\n          />\n        </Panel>\n      </Collapse>\n      <Col style={{ marginLeft: \"1rem\" }}>\n        <DeleteOutlined\n          style={{ cursor: \"pointer\" }}\n          onClick={(e) => handleClick(e)}\n        />\n        <Checkbox\n          onClick={(e) => completeHandler(e)}\n          checked={task.completed === true ? true : false}\n        ></Checkbox>\n      </Col>\n    </div>\n  );\n};\n\nexport default Item;\n"]},"metadata":{},"sourceType":"module"}