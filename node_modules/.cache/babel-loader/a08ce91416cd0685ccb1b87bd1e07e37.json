{"ast":null,"code":"import _objectSpread from\"/Users/dzennetahydyrova/board-project2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/dzennetahydyrova/board-project2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/dzennetahydyrova/board-project2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/dzennetahydyrova/board-project2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"antd/dist/antd.css\";import db from\"../../firebaseConfig\";import Modal from\"react-modal\";import{DatePicker,message}from\"antd\";import{Space,Button,Form,Input}from\"antd\";import\"antd/dist/antd.css\";import\"moment/locale/zh-cn\";import moment from\"moment\";var EditForm=function EditForm(_ref){var boardsItems=_ref.boardsItems,modalOpened=_ref.modalOpened,setModalOpened=_ref.setModalOpened,task=_ref.task,boardsId=_ref.boardsId;var _useState=useState(task),_useState2=_slicedToArray(_useState,2),editedTask=_useState2[0],setEditedTask=_useState2[1];var currentDate=new Date();currentDate.setDate(currentDate.getDate()+1);var defaultDate=currentDate.toISOString().substr(0,10);var _useState3=useState({title:task.title,due:task.due,assigner:task.assigner,assignee:task.assignee,id:task.id,completed:task.completed}),_useState4=_slicedToArray(_useState3,2),userInput=_useState4[0],setUserInput=_useState4[1];var editItem=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var modifiedItems,itemIndex;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:modifiedItems=boardsItems;itemIndex=modifiedItems.findIndex(function(item){return item.id===task.id;});modifiedItems[itemIndex]=userInput;_context.next=5;return db.firestore().collection(\"boards\").doc(boardsId).update({items:modifiedItems});case 5:case\"end\":return _context.stop();}}},_callee);}));return function editItem(){return _ref2.apply(this,arguments);};}();useEffect(function(){setEditedTask(userInput);},[userInput]);var handleInputValue=function handleInputValue(e){setUserInput(_objectSpread(_objectSpread({},userInput),{},{title:e.target.value,id:task.id}));};var formStyle={marginTop:\"10px\",marginLeft:\"10px\",marginRight:\"10px\"};var handleModal=function handleModal(){setModalOpened({modalOpen:modalOpened.modalOpen===true?false:true});};var handleEdit=function handleEdit(e){e.preventDefault();editItem(editedTask);setModalOpened({modalOpen:modalOpened.modalOpen===true?false:true});};var handleDueChange=function handleDueChange(value){message.info(\"Selected Date: \".concat(value?value.format(\"YYYY-MM-DD\"):\"None\"));setUserInput(_objectSpread(_objectSpread({},userInput),{},{due:value.toDate().toISOString().substr(0,10)}));};var handleAssignerChange=function handleAssignerChange(e){setUserInput(_objectSpread(_objectSpread({},userInput),{},{assigner:e.target.value}));};var handleAssigneeChange=function handleAssigneeChange(e){setUserInput(_objectSpread(_objectSpread({},userInput),{},{assignee:e.target.value}));};return/*#__PURE__*/React.createElement(Modal,{className:\"modal\",isOpen:modalOpened.modalOpen},/*#__PURE__*/React.createElement(Space,{direction:\"vertical\",align:\"center\"},/*#__PURE__*/React.createElement(Form,{style:formStyle},/*#__PURE__*/React.createElement(Input,{name:\"items\",value:userInput.title,className:\"task-title input-field item-input\",placeholder:\"Task title\",onChange:function onChange(e){return handleInputValue(e);},addonBefore:\"Title\"}),/*#__PURE__*/React.createElement(DatePicker,{onChange:function onChange(e){return handleDueChange(e);},defaultValue:moment(defaultDate),style:{color:\"white\"},className:\"form-btn\",addonBefore:\"Due date\"}),/*#__PURE__*/React.createElement(Input,{name:\"assigner\",value:userInput.assigner,placeholder:\"Assigner\",onChange:function onChange(e){return handleAssignerChange(e);},className:\"input-field item-input\",addonBefore:\"Assigner\"}),/*#__PURE__*/React.createElement(Input,{name:\"assignee\",value:userInput.assignee,placeholder:\"Assignee\",onChange:function onChange(e){return handleAssigneeChange(e);},className:\"input-field item-input\",addonBefore:\"Assignee\"}),/*#__PURE__*/React.createElement(Button,{variant:\"outline-info\",type:\"submit\",size:\"sm\",onClick:function onClick(e){return handleEdit(e);},className:\"form-btn\"},\"Edit task\")),/*#__PURE__*/React.createElement(Button,{className:\"form-btn\",onClick:function onClick(e){return handleModal(e);}},\"Close form\")));};export default EditForm;","map":{"version":3,"sources":["/Users/dzennetahydyrova/board-project2/src/components/EditForm/EditForm.js"],"names":["React","useState","useEffect","db","Modal","DatePicker","message","Space","Button","Form","Input","moment","EditForm","boardsItems","modalOpened","setModalOpened","task","boardsId","editedTask","setEditedTask","currentDate","Date","setDate","getDate","defaultDate","toISOString","substr","title","due","assigner","assignee","id","completed","userInput","setUserInput","editItem","modifiedItems","itemIndex","findIndex","item","firestore","collection","doc","update","items","handleInputValue","e","target","value","formStyle","marginTop","marginLeft","marginRight","handleModal","modalOpen","handleEdit","preventDefault","handleDueChange","info","format","toDate","handleAssignerChange","handleAssigneeChange","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"antd/dist/antd.css\";\nimport db from \"../../firebaseConfig\";\nimport Modal from \"react-modal\";\nimport { DatePicker, message } from \"antd\";\nimport { Space, Button, Form, Input } from \"antd\";\nimport \"antd/dist/antd.css\";\nimport \"moment/locale/zh-cn\";\nimport moment from \"moment\";\n\nconst EditForm = ({\n  boardsItems,\n  modalOpened,\n  setModalOpened,\n  task,\n  boardsId,\n}) => {\n  const [editedTask, setEditedTask] = useState(task);\n  const currentDate = new Date();\n  currentDate.setDate(currentDate.getDate() + 1);\n  const defaultDate = currentDate.toISOString().substr(0, 10);\n\n  const [userInput, setUserInput] = useState({\n    title: task.title,\n    due: task.due,\n    assigner: task.assigner,\n    assignee: task.assignee,\n    id: task.id,\n    completed: task.completed,\n  });\n\n  const editItem = async () => {\n    const modifiedItems = boardsItems;\n    const itemIndex = modifiedItems.findIndex((item) => item.id === task.id);\n    modifiedItems[itemIndex] = userInput;\n\n    await db.firestore().collection(\"boards\").doc(boardsId).update({\n      items: modifiedItems,\n    });\n  };\n\n  useEffect(() => {\n    setEditedTask(userInput);\n  }, [userInput]);\n\n  const handleInputValue = (e) => {\n    setUserInput({ ...userInput, title: e.target.value, id: task.id });\n  };\n\n  const formStyle = {\n    marginTop: \"10px\",\n    marginLeft: \"10px\",\n    marginRight: \"10px\",\n  };\n\n  const handleModal = () => {\n    setModalOpened({\n      modalOpen: modalOpened.modalOpen === true ? false : true,\n    });\n  };\n\n  const handleEdit = (e) => {\n    e.preventDefault();\n    editItem(editedTask);\n    setModalOpened({\n      modalOpen: modalOpened.modalOpen === true ? false : true,\n    });\n  };\n\n  const handleDueChange = (value) => {\n    message.info(\n      `Selected Date: ${value ? value.format(\"YYYY-MM-DD\") : \"None\"}`\n    );\n    setUserInput({\n      ...userInput,\n      due: value.toDate().toISOString().substr(0, 10),\n    });\n  };\n\n  const handleAssignerChange = (e) => {\n    setUserInput({ ...userInput, assigner: e.target.value });\n  };\n\n  const handleAssigneeChange = (e) => {\n    setUserInput({ ...userInput, assignee: e.target.value });\n  };\n\n  return (\n    <Modal className=\"modal\" isOpen={modalOpened.modalOpen}>\n      <Space direction=\"vertical\" align=\"center\">\n        <Form style={formStyle}>\n          <Input\n            name=\"items\"\n            value={userInput.title}\n            className=\"task-title input-field item-input\"\n            placeholder=\"Task title\"\n            onChange={(e) => handleInputValue(e)}\n            addonBefore=\"Title\"\n          />\n          <DatePicker\n            onChange={(e) => handleDueChange(e)}\n            defaultValue={moment(defaultDate)}\n            style={{ color: \"white\" }}\n            className=\"form-btn\"\n            addonBefore=\"Due date\"\n          />\n          <Input\n            name=\"assigner\"\n            value={userInput.assigner}\n            placeholder=\"Assigner\"\n            onChange={(e) => handleAssignerChange(e)}\n            className=\"input-field item-input\"\n            addonBefore=\"Assigner\"\n          />\n          <Input\n            name=\"assignee\"\n            value={userInput.assignee}\n            placeholder=\"Assignee\"\n            onChange={(e) => handleAssigneeChange(e)}\n            className=\"input-field item-input\"\n            addonBefore=\"Assignee\"\n          />\n          <Button\n            variant=\"outline-info\"\n            type=\"submit\"\n            size=\"sm\"\n            onClick={(e) => handleEdit(e)}\n            className=\"form-btn\"\n          >\n            Edit task\n          </Button>\n        </Form>\n        <Button className=\"form-btn\" onClick={(e) => handleModal(e)}>\n          Close form\n        </Button>\n      </Space>\n    </Modal>\n  );\n};\n\nexport default EditForm;\n"]},"metadata":{},"sourceType":"module"}